# ბექენდის დაჰოსტვის ინსტრუქცია Render.com-ზე

ეს დოკუმენტი გაგიწევთ დეტალურ ინსტრუქციას, თუ როგორ უნდა დაჰოსტოთ თქვენი პროექტის ბექენდი Render.com-ზე.

## წინასწარი მოთხოვნები

- Render.com-ზე ანგარიში
- Git რეპოზიტორია თქვენი პროექტისთვის (GitHub, GitLab, ან Bitbucket)

## ნაბიჯი 1: პროექტის მომზადება

თქვენი პროექტი უკვე მზადაა დასაჰოსტად, რადგან:

1. `package.json` ფაილში გვაქვს საჭირო სკრიპტები:
   - `build`: აწყობს როგორც ფრონტენდს, ასევე ბექენდს
   - `start`: გაუშვებს აწყობილ აპლიკაციას პროდაქშენ რეჟიმში

2. `render.yaml` ფაილი უკვე არსებობს და შეიცავს საჭირო კონფიგურაციას Render.com-ზე დასაჰოსტად.

3. CORS კონფიგურაცია უკვე გაწერილია `server/index.ts` ფაილში და შეიცავს დაჰოსტილი ფრონტენდის დომენს (`https://beamish-fox-7ea396.netlify.app`).

## ნაბიჯი 2: კოდის ატვირთვა Git რეპოზიტორიაში

1. თუ ჯერ არ გაქვთ Git რეპოზიტორია, შექმენით ის GitHub, GitLab ან Bitbucket-ზე.

2. ატვირთეთ თქვენი პროექტი რეპოზიტორიაში შემდეგი ბრძანებებით:

```bash
git init
git add .
git commit -m "Initial commit"
git remote add origin YOUR_REPOSITORY_URL
git push -u origin main
```

**შენიშვნა**: შეცვალეთ `YOUR_REPOSITORY_URL` თქვენი რეპოზიტორიის URL-ით.

## ნაბიჯი 3: Render.com-ზე სერვისის შექმნა

### Blueprint-ის გამოყენებით (რეკომენდებული)

1. შედით Render.com-ზე და დააკლიკეთ "New" ღილაკს.

2. აირჩიეთ "Blueprint" ოფცია.

3. დააკავშირეთ თქვენი Git რეპოზიტორია.

4. Render ავტომატურად აღმოაჩენს `render.yaml` ფაილს და შექმნის სერვისებს მის საფუძველზე.

5. დააკლიკეთ "Apply" ღილაკს.

### მანუალურად (ალტერნატიული მეთოდი)

1. შედით Render.com-ზე და დააკლიკეთ "New" ღილაკს.

2. აირჩიეთ "Web Service" ოფცია.

3. დააკავშირეთ თქვენი Git რეპოზიტორია.

4. შეავსეთ შემდეგი ინფორმაცია:
   - **Name**: universal-toolkit-server (ან სხვა სასურველი სახელი)
   - **Environment**: Node
   - **Build Command**: `npm install && npm run build`
   - **Start Command**: `npm run start`

5. გარემოს ცვლადების დამატება:
   - **NODE_ENV**: production
   - **DATABASE_URL**: (თუ იყენებთ გარე მონაცემთა ბაზას, მიუთითეთ მისი URL)

6. დააკლიკეთ "Create Web Service" ღილაკს.

## ნაბიჯი 4: მონაცემთა ბაზის კონფიგურაცია

თქვენი პროექტი იყენებს SQLite მონაცემთა ბაზას, რომელიც ლოკალურად ინახება ფაილში. Render.com-ზე დაჰოსტვისას გაითვალისწინეთ:

1. SQLite ფაილები არ არის მუდმივი Render.com-ზე - ისინი შეიძლება წაიშალოს სერვისის რესტარტის დროს.

2. პროდაქშენისთვის რეკომენდებულია გამოიყენოთ PostgreSQL ან სხვა გარე მონაცემთა ბაზა.

### PostgreSQL-ზე გადასვლა (რეკომენდებული პროდაქშენისთვის):

1. Render.com-ზე შექმენით PostgreSQL სერვისი:
   - დააკლიკეთ "New" ღილაკს
   - აირჩიეთ "PostgreSQL"
   - შეავსეთ საჭირო ინფორმაცია და შექმენით სერვისი

2. მიიღეთ მონაცემთა ბაზის კავშირის სტრინგი და დაამატეთ ის გარემოს ცვლადად თქვენს ვებ სერვისში:
   - **DATABASE_URL**: postgres://username:password@host:port/database_name

## ნაბიჯი 5: დეპლოიმენტის შემოწმება

1. დაელოდეთ, სანამ Render.com დაასრულებს თქვენი სერვისის დეპლოიმენტს.

2. შეამოწმეთ ლოგები რაიმე შეცდომის შემთხვევაში.

3. გახსენით თქვენი სერვისის URL და დარწმუნდით, რომ ის მუშაობს.

4. შეამოწმეთ ჯანმრთელობის შემოწმების ენდპოინტი: `https://your-service-url.onrender.com/api/health`

## ნაბიჯი 6: ფრონტენდის კონფიგურაცია

თქვენი ფრონტენდი უკვე დაკონფიგურებულია სწორად და იყენებს დაჰოსტილი ბექენდის URL-ს:

```typescript
// client/src/lib/config.ts
if (window.location.hostname.includes('netlify.app')) {
  return 'https://universal-toolkit-server.onrender.com';
}
```

თუ თქვენი ბექენდის URL განსხვავებულია, განაახლეთ ეს მნიშვნელობა და ხელახლა დააჰოსტეთ ფრონტენდი.

## რა ფაილები უნდა ავტვირთოთ

Render.com-ზე დაჰოსტვისას, თქვენ ატვირთავთ მთლიან Git რეპოზიტორიას. ეს მოიცავს ყველა ფაილს, გარდა:

- `node_modules/` (იგნორირებულია .gitignore-ით)
- `.env` ფაილები (არ უნდა ავტვირთოთ უსაფრთხოების მიზნით)

ძირითადი ფაილები, რომლებიც აუცილებელია ბექენდის დასაჰოსტად:

- `package.json` და `package-lock.json` - დამოკიდებულებები და სკრიპტები
- `server/` დირექტორია - ბექენდის კოდი
- `shared/` დირექტორია - საზიარო კოდი
- `render.yaml` - Render.com-ის კონფიგურაცია
- `vite.config.ts` - Vite კონფიგურაცია
- `tsconfig.json` - TypeScript კონფიგურაცია
- `migrations/` დირექტორია - მონაცემთა ბაზის მიგრაციები

## დამატებითი რჩევები

1. **ავტომატური დეპლოიმენტი**: Render.com ავტომატურად გადააწყობს თქვენს სერვისს, როდესაც ახალ კოდს ატვირთავთ Git რეპოზიტორიაში.

2. **მონიტორინგი**: გამოიყენეთ Render.com-ის დაშბორდი თქვენი სერვისის მონიტორინგისთვის.

3. **ლოგები**: შეამოწმეთ ლოგები პრობლემების დიაგნოსტიკისთვის.

4. **სკალირება**: საჭიროების შემთხვევაში, შეგიძლიათ გაზარდოთ თქვენი სერვისის რესურსები Render.com-ის დაშბორდიდან.

## პრობლემების გადაჭრა

1. **დეპლოიმენტის შეცდომები**: შეამოწმეთ ლოგები დეტალური ინფორმაციისთვის.

2. **CORS შეცდომები**: დარწმუნდით, რომ CORS კონფიგურაცია სწორად არის გაწერილი და შეიცავს ყველა საჭირო დომენს.

3. **მონაცემთა ბაზის პრობლემები**: თუ იყენებთ SQLite, გაითვალისწინეთ, რომ მონაცემები შეიძლება დაიკარგოს. გადადით PostgreSQL-ზე მუდმივი მონაცემებისთვის.

4. **გარემოს ცვლადები**: დარწმუნდით, რომ ყველა საჭირო გარემოს ცვლადი დამატებულია Render.com-ის დაშბორდში.